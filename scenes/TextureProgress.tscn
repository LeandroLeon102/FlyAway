[gd_scene load_steps=5 format=2]

[ext_resource path="res://scr/images/bars/2/over.png" type="Texture" id=1]
[ext_resource path="res://scr/images/bars/2/progress.png" type="Texture" id=2]
[ext_resource path="res://scr/images/bars/2/bg.png" type="Texture" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends TextureProgress

signal ended

var running = false
var restarting = false
var counting = 100

func count(val = null):
	if val:
		running = val
	else:
		running = not running

func restart():
	counting = lerp(counting, 0, .2)
	value = counting
	
	
func _process(_delta):
	if running:
		value += 1
	if value == max_value:
		count()
		restarting = true
		counting = 100
	if restarting:
		restart()
	if value == 0 and running:
		emit_signal(\"ended\")
		restarting = false
		running = true

"

[node name="TextureProgress" type="TextureProgress"]
margin_right = 32.0
margin_bottom = 32.0
value = 100.0
texture_under = ExtResource( 3 )
texture_over = ExtResource( 1 )
texture_progress = ExtResource( 2 )
tint_under = Color( 1, 1, 1, 0.498039 )
tint_progress = Color( 0.552941, 1, 0.478431, 1 )
script = SubResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}
